ExitProcess PROTO
.data
myArray    QWORD 10d,20d,30d,40d
finalArray QWORD 4 DUP(0)

.code
main proc

	mov r15, 8	; This is our index multiplier

	; use different register pg 179
	; print out the array numbers
	;	mov rcx, 4
	;	mov rsi, 0
	;	start loop
	;	mov rax, rsi
	;	mul r15
	;	mov rdi, rax
	;	mov rax, myArray[rdi]
	;	call WriteInt64
	; end loop
	
	mov rcx, 4
	mov rsi, 0
	POOPLOOP:
		
		mov rax, rsi
		mul r15
		mov rdx, myArray[rax]

		cmp rsi, 3
		je HandleLast

		mov finalArray[rax + 8], rdx
		jmp EndLoop
	
		HandleLast:
		mov finalArray[0], rdx

		EndLoop:
		inc rsi
	LOOP POOPLOOP


	mov rcx, 4
	mov rsi, 0
	StartLoop:

		mov rax, rsi
		mul r15
		mov rdi, rax
		mov rax, finalArray[rdi]
		call WriteInt64
	EndLoop
	
		call ExitProcess
main endp
end
